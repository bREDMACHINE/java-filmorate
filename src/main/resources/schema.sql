CREATE TABLE IF NOT EXISTS USERS (
    USER_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR(255) NOT NULL,
    LOGIN VARCHAR(255) NOT NULL,
    USER_NAME VARCHAR(255),
    BIRTHDAY DATE
);

CREATE TABLE IF NOT EXISTS FILMS (
    FILM_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FILM_NAME VARCHAR(255) NOT NULL,
    DESCRIPTION VARCHAR(255) NOT NULL,
    MPA_ID INT,
    RELEASEDATE DATE,
    DURATION INT,
    RATE INT
);

CREATE TABLE IF NOT EXISTS USER_FILMS (
    USER_ID INT REFERENCES USERS(USER_ID),
    FILM_ID INT REFERENCES FILMS(FILM_ID),
    PRIMARY KEY (FILM_ID, USER_ID)
);

CREATE TABLE IF NOT EXISTS USER_FRIENDS (
    USERONE_ID INT REFERENCES USERS(USER_ID),
    USERTWO_ID INT REFERENCES USERS(USER_ID),
    PRIMARY KEY (USERONE_ID, USERTWO_ID)
);

CREATE TABLE IF NOT EXISTS GENRES (
    GENRE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    GENRE_NAME VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS GENRE_FILMS (
    GENRE_ID INT REFERENCES GENRES(GENRE_ID),
    FILM_ID INT REFERENCES FILMS(FILM_ID),
    PRIMARY KEY (FILM_ID, GENRE_ID)
);

CREATE TABLE IF NOT EXISTS RATINGS (
    MPA_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MPA_NAME VARCHAR(255)
);